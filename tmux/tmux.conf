# TMUX configuration

# change Prefix from Ctrl-b to Ctrl-a
set-option -g prefix C-a

# set the base index for windows to 1 instead of 8
set-option -g base-index 1

# set the base index for panes to 1 instead of 8
set-option -g pane-base-index 1

# mouse support
set-window-option -g mouse on

# clipboard support
set-option -s set-clipboard on

# big history
set-option -g history-limit 100000

# enable vi keys
set-window-option -g mode-keys vi

# enable activity alerts
set-window-option -g monitor-activity on
set-option -g visual-activity on

# set the color of the window list
set-window-option -g window-status-fg cyan
set-window-option -g window-status-bg default
set-window-option -g window-status-attr dim

# set colors for active window
set-window-option -g window-status-current-fg white
set-window-option -g window-status-current-bg red
set-window-option -g window-status-current-attr bright

# pane colors
set-option -g pane-border-fg green
set-option -g pane-border-bg black
set-option -g pane-active-border-fg white
set-option -g pane-active-border-bg colour130  # orange

# shortcut for synchronize-panes toggle
bind-key C-s set-window-option synchronize-panes

# log out to a text file on demand
bind-key W pipe-pane -o "cat >> ~/#W.log" \; display "Toggled logging to ~/#W.log"

# settings for resurrecting sessions (necessary with tmux-continuum?)
set-option -g @resurrect-processes 'ssh'  # additional processes to restore
set-option -g @resurrect-processes 'mosh-client'  # additional processes to restore
#set-option -g @resurrect-save-shell-history 'on'
set-option -g @resurrect-capture-pane-contents 'on'
set-option -g @resurrect-strategy-vim 'session'  # for vim
set-option -g @resurrect-strategy-nvim 'session'  # for neovim

# settings for tmux-continuum
set-option -g @continuum-boot 'on'
set-option -g @continuum-restore 'on'
set-option -g @continuum-save-interval '60'

# terminal settings for 24-bit color
set-option -g default-terminal "screen-256color"
set-option -ga terminal-overrides ",*256col*:Tc"

# status line, generated by tmuxline.vim
if-shell "test -f ~/.tmux-status.conf" "source ~/.tmux-status.conf"

# Send the same command to all panes/windows in the current session
bind-key C-e command-prompt -p "Command:" \
    "run \"tmux list-panes -s -F '##{session_name}:##{window_index}.##{pane_index}' \
        | xargs -I PANE tmux send-keys -t PANE '%1' Enter\""

# reload config
bind-key r source-file ~/.tmux.conf \; display-message "Config reloaded..."

# List of plugins
set-option -g @plugin 'tmux-plugins/tpm'
set-option -g @plugin 'tmux-plugins/tmux-sensible'
set-option -g @plugin 'tmux-plugins/tmux-pain-control'
set-option -g @plugin 'tmux-plugins/tmux-prefix-highlight'
set-option -g @plugin 'tmux-plugins/tmux-copycat'
set-option -g @plugin 'tmux-plugins/tmux-yank'
set-option -g @plugin 'tmux-plugins/tmux-open'
set-option -g @plugin 'tmux-plugins/vim-tmux-focus-events'
set-option -g @plugin 'tmux-plugins/tmux-sessionist'
set-option -g @plugin 'tmux-plugins/tmux-resurrect'
#set-option -g @plugin 'tmux-plugins/tmux-continuum'

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'
